define("DiRecord",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){this.mKey=t,this.mValue=r}return Object.defineProperty(e.prototype,"key",{get:function(){return this.mKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.mValue},set:function(e){this.mValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.mContainer},enumerable:!0,configurable:!0}),e}();t.DiRecord=r}),define("Inject",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=function(e,t){return function(r,n){var i,o,u,s=void 0!==t?t:Reflect.getMetadata("design:type",r,n),a={get:function(){var t=e&&e()||this.getDiContext&&this.getDiContext();if(!t)throw new Error("Cant inject value: 'context' is not defined in decorator of property '@{propKey}'");return i&&t==u&&t.timestamp==o||(u=t,o=t.timestamp,i=t.getRecord(s)),i&&i.value}};return Object.defineProperty(r,n,a),a}},t.fromSelf=null}),define("IHaveContext",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDiContext=function(e,t){if("object"==typeof t)e.getDiContext=function(){return t};else{if("function"!=typeof t)throw new Error("Invalid argument 'context'");e.getDiContext}}}),define("index",["require","exports","DiRecord","DiContainer","Inject","IHaveContext"],function(e,t,r,n,i,o){"use strict";function u(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),u(r),u(n),u(i),u(o)}),define("DiContainer",["require","exports","index"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.mChildren=[],this.mMap=[],this.mTimestamp=0,this.parent=e}return e.prototype.register=function(e,t){var n=this.getRecord(e,!1);return n?n.value=t:(n=new r.DiRecord(this,e,t),this.mMap.push(n)),this.updateTimestamp(),n},e.prototype.unregister=function(e,t){void 0===t&&(t=!1);for(var r,n=!1;r=this.getRecord(e,t);)r.container.mMap.splice(r.container.mMap.indexOf(r)),n=!0;return this.updateTimestamp(),n},e.prototype.unregisterAll=function(){this.mMap=[],this.updateTimestamp()},e.prototype.getRecord=function(e,t){void 0===t&&(t=!0);var r=this.mMap.find(function(t){return t.key==e});return!r&&t&&this.mParent&&(r=this.mParent.getRecord(e,t)),r},Object.defineProperty(e.prototype,"parent",{get:function(){return this.mParent},set:function(e){var t=this.mParent;this.mParent=e,t&&e!=t&&t.mChildren.splice(t.mChildren.indexOf(this)),e&&this.mParent.mChildren.push(this),this.updateTimestamp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.mTimestamp},enumerable:!0,configurable:!0}),e.prototype.updateTimestamp=function(){this.mTimestamp++,this.mChildren&&this.mChildren.forEach(function(e){return e.updateTimestamp()})},e.prototype.dispose=function(){this.unregisterAll(),this.parent=null},e.prototype.registerService=function(e,t){return this.register(e,t)},e.prototype.getService=function(e){var t=this.getRecord(e);return t&&t.value},e.prototype.registerValue=function(e,t){return this.register(e,t)},e.prototype.getValue=function(e,t){var r=this.getRecord(e);return r?r.value:t},e}();t.DiContainer=n});